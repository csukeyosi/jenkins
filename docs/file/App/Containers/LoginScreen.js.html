<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">App/Containers/LoginScreen.js | Jenkins: React-Native API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Root.js~Root.html">Root</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Components</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Components/AlertMessageComponent.js~AlertMessage.html">AlertMessage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Components/DrawerButton.js~DrawerButton.html">DrawerButton</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Components/FullButton.js~FullButton.html">FullButton</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Components/RoundedButton.js~RoundedButton.html">RoundedButton</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Config</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SETTINGS">SETTINGS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-REDUX_PERSIST">REDUX_PERSIST</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Containers</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Containers/DeviceInfoScreen.js~DeviceInfoScreen.html">DeviceInfoScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Containers/DrawerContent.js~DrawerContent.html">DrawerContent</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Containers/Styles</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RootStyle">RootStyle</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Navigation</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/App/Navigation/NavigationRouter.js~NavigationRouter.html">NavigationRouter</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Reducers</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-INITIAL_STATE">INITIAL_STATE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-INITIAL_STATE">INITIAL_STATE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-INITIAL_STATE">INITIAL_STATE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-persistentStoreBlacklist">persistentStoreBlacklist</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Sagas</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-watchStartup">watchStartup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-root">root</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Themes</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ApplicationStyles">ApplicationStyles</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-colors">colors</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-images">images</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-metrics">metrics</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-transitions">transitions</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">App/Containers/LoginScreen.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, {PropTypes} from &apos;react&apos;;
import {
  View,
  ScrollView,
  Text,
  TextInput,
  TouchableOpacity,
  Image,
  Keyboard,
  LayoutAnimation
} from &apos;react-native&apos;;
import { connect } from &apos;react-redux&apos;;
import Styles from &apos;./Styles/LoginScreenStyle&apos;;
import Actions from &apos;../Actions/Creators&apos;;
import {Images, Metrics} from &apos;../Themes&apos;;
import { Actions as NavigationActions } from &apos;react-native-router-flux&apos;;

// I18n
import I18n from &apos;../I18n/I18n.js&apos;;

class LoginScreen extends React.Component {

  constructor (props) {
    super(props);
    this.state = {
      username: &apos;&apos;,
      password: &apos;&apos;,
      instanceName: &apos;&apos;,
      host: &apos;&apos;,
      port: &apos;&apos;,
      visibleHeight: Metrics.screenHeight,
      topLogo: { width: Metrics.screenWidth }
    };
    this.isAttempting = false;
  }

  componentWillReceiveProps (newProps) {
    this.forceUpdate();
    // Did the login attempt complete?
    if (this.isAttempting &amp;&amp; !newProps.attempting &amp;&amp; newProps.loginSuccess) {
      console.log(newProps);
      this.props.close();
    }
  }

  componentWillMount () {
    // Using keyboardWillShow/Hide looks 1,000 times better, but doesn&apos;t work on Android
    // TODO: Revisit this if Android begins to support - https://github.com/facebook/react-native/issues/3468
    this.keyboardDidShowListener = Keyboard.addListener(&apos;keyboardDidShow&apos;, this.keyboardDidShow);
    this.keyboardDidHideListener = Keyboard.addListener(&apos;keyboardDidHide&apos;, this.keyboardDidHide);
  }

  componentWillUnmount () {
    this.keyboardDidShowListener.remove();
    this.keyboardDidHideListener.remove();
  }

  keyboardDidShow = (e) =&gt; {
    // Animation types easeInEaseOut/linear/spring
    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);
    let newSize = Metrics.screenHeight - e.endCoordinates.height;
    this.setState({
      visibleHeight: newSize,
      topLogo: {width: 100, height: 70}
    });
  };

  keyboardDidHide = (e) =&gt; {
    // Animation types easeInEaseOut/linear/spring
    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);
    this.setState({
      visibleHeight: Metrics.screenHeight,
      topLogo: {width: Metrics.screenWidth}
    });
  };

  handlePressLogin = () =&gt; {
    const { username, password, instanceName, host, port } = this.state;
    this.isAttempting = true;
    // attempt a login - a saga is listening to pick it up from here.
    this.props.attemptLogin(username, password, instanceName, host, port );
  };

  handleChangeUsername = (text) =&gt; {
    this.setState({ username: text });
  };

  handleChangePassword = (text) =&gt; {
    this.setState({ password: text });
  };

  handleChangeInstanceName = (text) =&gt; {
    this.setState({ instanceName: text });
  };

  handleChangeHost = (text) =&gt; {
    this.setState({ host: text });
  };

  handleChangePort = (text) =&gt; {
    this.setState({ port: text });
  };

  render () {
    const { username, password, instanceName, host, port } = this.state;
    const { attempting } = this.props;
    const editable = !attempting;
    const textInputStyle = editable ? Styles.textInput : Styles.textInputReadonly;
    return (
      &lt;ScrollView contentContainerStyle={{justifyContent: &apos;center&apos;}} style={[Styles.container, {height: this.state.visibleHeight}]}&gt;
        &lt;Image source={Images.logo} style={[Styles.topLogo, this.state.topLogo]} /&gt;
        &lt;View style={Styles.form}&gt;
          &lt;View style={Styles.row}&gt;
            &lt;Text style={Styles.rowLabel}&gt;{I18n.t(&apos;instanceName&apos;)}&lt;/Text&gt;
            &lt;TextInput
              ref=&apos;instanceName&apos;
              autoCapitalize=&quot;none&quot;
              style={textInputStyle}
              value={instanceName}
              editable={editable}
              keyboardType=&apos;default&apos;
              returnKeyType=&apos;next&apos;
              onChangeText={this.handleChangeInstanceName}
              underlineColorAndroid=&apos;transparent&apos;
              onSubmitEditing={() =&gt; this.refs.instanceName.focus()}
              placeholder={I18n.t(&apos;instanceName&apos;)} /&gt;
          &lt;/View&gt;

          &lt;View style={Styles.row}&gt;
            &lt;Text style={Styles.rowLabel}&gt;{I18n.t(&apos;host&apos;)}&lt;/Text&gt;
            &lt;TextInput
              ref=&apos;host&apos;
              autoCapitalize=&quot;none&quot;
              style={textInputStyle}
              value={host}
              editable={editable}
              keyboardType=&apos;default&apos;
              returnKeyType=&apos;next&apos;
              onChangeText={this.handleChangeHost}
              underlineColorAndroid=&apos;transparent&apos;
              onSubmitEditing={() =&gt; this.refs.host.focus()}
              placeholder={I18n.t(&apos;host&apos;)} /&gt;
          &lt;/View&gt;

          &lt;View style={Styles.row}&gt;
            &lt;Text style={Styles.rowLabel}&gt;{I18n.t(&apos;port&apos;)}&lt;/Text&gt;
            &lt;TextInput
              ref=&apos;port&apos;
              autoCapitalize=&quot;none&quot;
              style={textInputStyle}
              value={port}
              editable={editable}
              keyboardType=&apos;default&apos;
              returnKeyType=&apos;next&apos;
              onChangeText={this.handleChangePort}
              underlineColorAndroid=&apos;transparent&apos;
              onSubmitEditing={() =&gt; this.refs.port.focus()}
              placeholder={I18n.t(&apos;port&apos;)} /&gt;
          &lt;/View&gt;

          &lt;View style={Styles.row}&gt;
            &lt;Text style={Styles.rowLabel}&gt;{I18n.t(&apos;username&apos;)}&lt;/Text&gt;
            &lt;TextInput
              ref=&apos;username&apos;
              autoCapitalize=&quot;none&quot;
              style={textInputStyle}
              value={username}
              editable={editable}
              keyboardType=&apos;default&apos;
              returnKeyType=&apos;next&apos;
              onChangeText={this.handleChangeUsername}
              underlineColorAndroid=&apos;transparent&apos;
              onSubmitEditing={() =&gt; this.refs.password.focus()}
              placeholder={I18n.t(&apos;username&apos;)} /&gt;
          &lt;/View&gt;

          &lt;View style={Styles.row}&gt;
            &lt;Text style={Styles.rowLabel}&gt;{I18n.t(&apos;password&apos;)}&lt;/Text&gt;
            &lt;TextInput
              ref=&apos;password&apos;
              autoCapitalize=&quot;none&quot;
              style={textInputStyle}
              value={password}
              editable={editable}
              keyboardType=&apos;default&apos;
              returnKeyType=&apos;go&apos;
              secureTextEntry
              onChangeText={this.handleChangePassword}
              underlineColorAndroid=&apos;transparent&apos;
              onSubmitEditing={this.handlePressLogin}
              placeholder={I18n.t(&apos;password&apos;)} /&gt;
          &lt;/View&gt;

          &lt;View style={[Styles.loginRow]}&gt;
            &lt;TouchableOpacity style={Styles.loginButtonWrapper} onPress={this.handlePressLogin}&gt;
              &lt;View style={Styles.loginButton}&gt;
                &lt;Text style={Styles.loginText}&gt;{I18n.t(&apos;signIn&apos;)}&lt;/Text&gt;
              &lt;/View&gt;
            &lt;/TouchableOpacity&gt;
            &lt;TouchableOpacity style={Styles.loginButtonWrapper} onPress={this.props.close}&gt;
              &lt;View style={Styles.loginButton}&gt;
                &lt;Text style={Styles.loginText}&gt;{I18n.t(&apos;cancel&apos;)}&lt;/Text&gt;
              &lt;/View&gt;
            &lt;/TouchableOpacity&gt;
          &lt;/View&gt;
        &lt;/View&gt;

      &lt;/ScrollView&gt;
    );
  }

}

LoginScreen.propTypes = {
  dispatch: PropTypes.func,
  attempting: PropTypes.bool,
  close: PropTypes.func,
  attemptLogin: PropTypes.func,
  loginFail: PropTypes.bool,
  loginSuccess: PropTypes.bool
};

const mapStateToProps = (state) =&gt; {
  return {
    attempting: state.login.attempting,
    username: state.login.username,
    jobs: state.jobs.data,
    loginSuccess: state.login.loginSuccess,
    loginFail: state.login.fail
  };
};

const mapDispatchToProps = (dispatch) =&gt; {
  return {
    close: NavigationActions.pop,
    attemptLogin: (username, password, instanceName, host, port) =&gt; dispatch(Actions.attemptLogin(username, password, instanceName, host, port))
  };
};

export default connect(mapStateToProps, mapDispatchToProps)(LoginScreen);
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
